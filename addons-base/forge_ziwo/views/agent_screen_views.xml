<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record model="ir.ui.view" id="view_agent_screen_form">
            <field name="name">agent.screen.form</field>
            <field name="model">agent.screen</field>
            <field name="arch" type="xml">
                <form create="false" delete="false">
                    <sheet>
                        <group string="Contact Filters" col="2">
                            <group>
                                <label for="partner_id"/>
                                <div class="o_row">
                                    <field name="partner_id"/>
                                    <button
                                        name="open_edit_contact_wizard"
                                        id="open_edit_contact_wizard"
                                        type="object"
                                        string="Edit"
                                        icon="fa-pencil"
                                        class="pull_right inline"
                                        attrs="{'invisible': [('partner_id', '=', False)]}"
                                    />
                                </div>
                                <label for="phone"/>
                                <div class="o_row">
                                    <field name="phone"/>
                                    <button
                                        name="create_new_call_phone"
                                        id="create_new_call_phone"
                                        type="object"
                                        string="Call"
                                        icon="fa-phone"
                                        class="pull_right inline"
                                        attrs="{'invisible': [('phone', '=', False)]}"
                                    />
                                </div>
                                <label for="mobile"/>
                                <div class="o_row">
                                    <field name="mobile"/>
                                    <button
                                        name="create_new_call"
                                        id="create_new_call"
                                        type="object"
                                        string="Call"
                                        icon="fa-phone"
                                        class="pull_right inline"
                                        attrs="{'invisible': [('mobile', '=', False)]}"
                                    />
                                </div>
                                <field name="email"/>
                            </group>
                            <group>
                                <field name="show_company_filter" invisible='1'/>
                                <field name="enable_company_filter" invisible='1'/>
                                <label for="company"/>
                                <div class="o_row">
                                    <field name="company"/>
                                    <button
                                        name="toggle_commpany_filter"
                                        id="toggle_commpany_filter"
                                        type="object"
                                        string="Show Company Records"
                                        icon="fa-list"
                                        class="pull_right inline"
                                        attrs="{'invisible': ['|', ('show_company_filter', '!=', True), ('enable_company_filter', '!=', False)]}"
                                    />
                                    <button
                                        name="toggle_commpany_filter"
                                        id="toggle_commpany_filter"
                                        type="object"
                                        string="Show Individual Records"
                                        icon="fa-list"
                                        class="pull_right inline"
                                        attrs="{'invisible': ['|', ('show_company_filter', '!=', True), ('enable_company_filter', '!=', True)]}"
                                    />
                                </div>
                                <field name="country"/>
                                <field name="tz"/>
                            </group>
                        </group>

                        <separator/>

                        <notebook>
                            <field name="show_oppotunity_tab" invisible="1"/>
                            <page string="Opportunities" groups="sales_team.group_sale_salesman" attrs="{'invisible': [('show_oppotunity_tab', '!=', True)]}">
                                <label for="opportunity_count"/>
                                <field name="opportunity_count" attrs="{'invisible': [('partner_id', '=', False)]}"/>
                                <button
                                        name="create_new_opportunity"
                                        id="create_new_opportunity"
                                        type="object"
                                        string="New Opportunity"
                                        icon="fa-plus"
                                        class="btn-link oe_right"
                                        attrs="{'invisible': [('partner_id', '=', False)]}"
                                        groups="sales_team.group_sale_salesman"
                                />
                                <field name="opportunity_ids">
                                    <tree>
                                        <field name="name"/>
                                        <field name="user_id" attrs="{'readonly': False}"/>
                                        <field name="partner_id"/>
                                        <field name="stage_id"/>
                                        <button
                                                name="action_add_note"
                                                type="object"
                                                string="Add Note"
                                                icon="fa-sticky-note"
                                        />
                                        <button name="%(crm.action_lead_mail_compose)d" type="action" string="Email"
                                                icon="fa-envelope"/>
                                        <button
                                                name="action_view_opportunity"
                                                type="object"
                                                string="View Opportunity"
                                                class="btn-link"
                                                icon="fa-search"
                                        />
                                    </tree>
                                </field>
                            </page>
                            <field name="show_ticket_tab" invisible="1"/>
                            <page string="Tickets" groups="helpdesk.group_helpdesk_user" attrs="{'invisible': [('show_ticket_tab', '!=', True)]}">
                                <label for="ticket_count"/>
                                <field name="ticket_count" attrs="{'invisible': [('partner_id', '=', False)]}"/>
                                <button
                                        name="create_new_ticket"
                                        id="create_new_ticket"
                                        type="object"
                                        string="New Ticket"
                                        icon="fa-plus"
                                        class="btn-link oe_right"
                                        attrs="{'invisible': [('partner_id', '=', False)]}"
                                        groups="helpdesk.group_helpdesk_user"
                                />
                                <field name="ticket_ids">
                                    <tree>
                                        <field name="priority" widget="priority"/>
                                        <field name="name"/>
                                        <field name="user_id"/>
                                        <field name="partner_id"/>
                                        <field name="sla_deadline" widget="remaining_days"/>
                                        <field name="stage_id"/>
                                        <button
                                                name="action_add_note"
                                                type="object"
                                                string="Add Note"
                                                icon="fa-sticky-note"
                                        />
                                        <button name="%(forge_ziwo.action_ticket_mail_compose)d" type="action"
                                                string="Email"
                                                icon="fa-envelope"/>
                                        <button
                                                name="action_view_ticket"
                                                type="object"
                                                string="View Ticket"
                                                class="btn-link"
                                                icon="fa-search"
                                        />
                                    </tree>
                                </field>
                            </page>
                            <field name="show_subscription_tab" invisible="1"/>
                            <page string="Subscriptions" groups="sales_team.group_sale_salesman"  attrs="{'invisible': [('show_subscription_tab', '!=', True)]}">
                                <label for="subscription_count"/>
                                <field name="subscription_count" attrs="{'invisible': [('partner_id', '=', False)]}"/>
                                <button
                                        name="create_new_subscription"
                                        id="create_new_subscription"
                                        type="object"
                                        string="New Subscription"
                                        icon="fa-plus"
                                        class="btn-link oe_right"
                                        attrs="{'invisible': [('partner_id', '=', False)]}"
                                        groups="sales_team.group_sale_salesman"
                                />
                                <field name="subscription_ids" domain="[('is_subscription', '=', True)]">
                                    <tree>
                                        <field name="state" invisible="1"/>
                                        <field name="name"/>
                                        <field name="user_id"/>
                                        <field name="partner_id"/>
                                        <button
                                                name="action_add_note"
                                                type="object"
                                                string="Add Note"
                                                icon="fa-sticky-note"
                                        />
                                        <button name="%(forge_ziwo.action_ticket_mail_compose)d" type="action"
                                                string="Email"
                                                icon="fa-envelope"/>
                                        <button
                                                name="action_view_subscription"
                                                type="object"
                                                string="View Subcription"
                                                class="btn-link"
                                                icon="fa-search"
                                        />
                                    </tree>
                                </field>
                            </page>
                            <field name="show_task_tab" invisible="1"/>
                            <page string="Tasks" groups="project.group_project_user" attrs="{'invisible': [('show_task_tab', '!=', True)]}">
                                <label for="task_count"/>
                                <field name="task_count" attrs="{'invisible': [('partner_id', '=', False)]}"/>
                                <button
                                        name="create_new_task"
                                        id="create_new_task"
                                        type="object"
                                        string="New Task"
                                        icon="fa-plus"
                                        class="btn-link oe_right"
                                        attrs="{'invisible': [('partner_id', '=', False)]}"
                                        groups="project.group_project_user"
                                />
                                <field name="task_ids">
                                    <tree>
                                        <field name="name"/>
                                        <field name="project_id"/>
                                        <field name="user_ids" widget="many2many_avatar_user"/>
                                        <field name="partner_id"/>
                                        <field name="tag_ids" widget="many2many_tags"/>
                                        <field name="date_deadline"/>
                                        <button
                                                name="action_add_note"
                                                type="object"
                                                string="Add Note"
                                                icon="fa-sticky-note"
                                        />
                                        <button name="%(forge_ziwo.action_ticket_mail_compose)d" type="action"
                                                string="Email"
                                                icon="fa-envelope"/>
                                        <button
                                                name="action_view_task"
                                                type="object"
                                                string="View Task"
                                                class="btn-link"
                                                icon="fa-search"
                                        />
                                    </tree>
                                </field>
                            </page>
                            <page string="Call History">
                                <label for="calls_count"/>
                                <field name="calls_count" attrs="{'invisible': [('partner_id', '=', False)]}"/>
                                <field name="calls_ids">
                                    <tree default_order="call_time desc">
                                        <field name="agent_id"/>
                                        <field name="agent_ids"/>
                                        <field name="partner_id"/>
                                        <field name="call_type"/>
                                        <field name="call_status"/>
                                        <field name="call_time"/>
                                        <field name="model_reference_model"/>
                                        <field name="model_reference" string="Record"/>
                                        <button
                                                name="action_add_note"
                                                type="object"
                                                string="Add Note"
                                                icon="fa-sticky-note"
                                        />
                                        <button
                                                name="action_view_call"
                                                type="object"
                                                string="View Call"
                                                class="btn-link"
                                                icon="fa-search"
                                        />
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>

            </field>
        </record>

        <!--? Window Action -->
        <record id="action_agent_screen" model="ir.actions.act_window">
            <field name="name">Agent Screen</field>
            <field name="res_model">agent.screen</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_agent_screen_form"/>
            <field name="target">inline</field>
            <field name="context">{'form_view_initial_mode': 'edit', 'no_breadcrumbs': True}</field>
        </record>

        <!--? Menu Items -->
        <menuitem id="parent_menu_agent_screen" name="Agent Screen" sequence="0" web_icon="forge_ziwo,static/description/icon.png"/>
        <record id="menu_agent_screen" model="ir.ui.menu">
            <field name="name">Agent Screen</field>
            <field name="sequence">10</field>
            <field name="parent_id" ref="parent_menu_agent_screen"/>
            <field name="action" ref="action_agent_screen"/>
        </record>

    </data>
</odoo>